---
title: Git 常用指令总结
date: 2018/04/03
categories:
- tools
- git
tags:
- summary
---

1. # 配置命令

```shell
$ git config --global user.name "Your Name"
$ git config --global user.email "email@example.com"
```

- 配置 Git 的姓名和Email地址（自报家门）
- *git config* 命令的 *--global* 参数，表示是针对当前用户起作用，如果不加，那只针对当前仓库起作用

```shell
$ git config --global color.ui true
```

* 让 Git 显示颜色

```shell
$ git config --global alias.st status
```

* Git 命令别名设置



2. # 基本操作指令

```shell
$ git init
```

- 把当前目录变成 Git 可以管理的仓库

```shell
$ git add <filename> 
```

- 把目录中的文件提交到仓库的暂存区

```shell
$ git commit -m "<instructions>"
```

- 把暂存区的文件提交到仓库中
- *-m* 后面输入的是本次提交的说明，可以输入任意内容，方便从历史记录中找到改动记录

```shell
$ git status
```

* 命令返回工作区当前的状态

```shell
$ git diff <filename>
$ git diff HEAD -- <filename>
```

* 顾名思义就是查看 difference，显示的格式正式 Unix 通用的 diff 格式
* 前者是比较工作区和暂存区中的文件；后者是比较工作区和版本库里面最新版本的区别

```shell
$ git log
$ git log --pretty=oneline
```

* *git log* 命令显示从最近到最远的提交日志
* *--pretty=oneline* 以 版本号和提交说明的简要形式显示日志

```shell
$ git reflog
```

* 用来记录用户的每一次命令

```shell
$ git reset --hard HEAD^
$ git reset --hard <commit id>
```

* 在 Git 中，用 HEAD 表示当前版本，上一个版本就是 HEAD^（或 HEAD~1），上上个版本就是 HEAD^^（或 HEAD~2）。
* *--hard* 参数的意义 ？



3. # 撤销修改指令

```shell
$ git checkout --<filename>
```

* 把文件在工作区的修改全部撤销（修改工作区）

```shell
$ git reset HEAD <filename>
```

* 把暂存区的修改撤销（unstage)，重新放回工作区（修改暂存区）



4. # 删除文件指令

```shell
$ rm <filename>
```

* 工作区操作指令，会造成工作区和版本库的不一致性。存在两种处理方法

```shell
$ git rm <filename>
```

* 处理方法一，确实从版本库中删除该文件

```shell
$ git checkout -- <filename>
```

* 处理方法二，还原
* *git checkout* 其实是用版本库里的版本替换工作区的版本，无论工作区是修改还是删除，都不可以”一键还原“



5. # 远程仓库指令

```shell
$ ssh-keygen -t rsa -C "youremail@example.com"
```

* 创建 SSH Key

```shell
$ git remote add origin git@server-name:path/repo-name.git
```

* 把一个已有的本地仓库同GitHub上的仓库相关联
* 远程库的默认名字是 origin, 也可以改成其他

```shell
$ git push -u origin master  #first push
$ git push origin master          #主分支
$ git push origin <branchname>    #其它分支
```

* 由于远程库是空的，我们第一次推送 master 分支时，加上*-u* 参数，Git 不但会把本地的 master 分支内容推送给远程新的 master 分支，还会把本地的 master 分支和远程的 master 分支关联起来，以后推送或拉取时可以简化命令。

```shell
$ git clone <ssh | https>
```

* 从远程库克隆指令

```shell
$ git remote
$ git remote -v     #详细信息
```

* 查看远程库的信息

```shell
$ git branch --set-upstream dev origin/dev  #指定本地分支与远程origin/dev分支的链接
$ git pull  
```

* 抓取最新提交，然后在本地合并，解决冲突，再推送



6. # 分支操作指令

```shell
$ git checkout -b <branchname>
# 同以下两条指令等价
$ git branch <branchname>        #创建
$ git checkout <branchname>      #切换
```

* *git checkout* 命令加上 *-b* 参数表示创建并切换

```shell
$ git branch
```

* *git branch* 命令会列出所有分支，当前分支前面会标一个 * 号

```shell
$ git merge <branchname>
```

* *git merge* 用于合并指定分支到当前分支

```shell
$ git branch -d <branchname>
```

* 删除指定分支

```shell
$ git log --graph --pretty=oneline --abbrev-commit
```

* 查看分支的合并情况

```shell
$ git merge --no-ff -m "<instructions>" <branchname>
```

* 合并分支时，加上 *--no-ff* 参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而 *fast forward* 合并就看不出来曾经做过合并

```shell
$ git stash         #相当于入栈
$ git stash list        #查看栈的内容
$ git stash apply       #恢复指令，stash内容不删除
$ git stash pop         #恢复指令，同时删除stash内容
```

* stash 功能，实现当前工作现场的”储藏“和恢复

```shell
$ git branch -D <branchname>
```

* 强行删除分支

```shell
$ git checkout -b branch-name origin/branch-name
```

* 本地创建和远程分支对应的分支

```shell
$ git branch --set-upstream branch-name origin/branch-name
```

* 建立本地分支和远程分支的关联



7. # 标签管理指令

```shell
$ git branch
$ git checkout master      #切换的需要打标签的分支
$ git tag <tagname>        #打一个新标签
$ git tag <tagname> <commit id>   #根据版本号打标签
$ git tag -a <tagname> -m "<instructions>" <commit id>    #创建带有说明的标签
$ git tag                  #查看所有标签
$ git show <tagname>       #查看标签信息
$ git tag -d <tagname>         #删除标签
$ git push origin <tagname>    #推送某个标签到远程
$ git push origin --tags       #一次性推送全部尚未推送到远程的本地标签
### 删除远程标签
$ git tag -d <tagname>        #删除本地标签
$ git push origin :ref/tags/<tagname>       #删除对应远程标签
```

